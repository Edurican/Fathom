name: Discord Notification

on:
  pull_request:
    types: [opened, closed]
  discussion:
    types: [created]

jobs:
  notify-pr:
    if: github.event_name == 'pull_request'
    runs-on: ubuntu-latest
    steps:
      - name: PR Opened
        if: github.event.action == 'opened'
        uses: sarisia/actions-status-discord@v1
        with:
          webhook: ${{ secrets.DISCORD_WEBHOOK }}
          nodetail: true
          title: "ğŸŒŠ ìƒˆ ë°œí‘œìë£Œ ë“±ë¡"
          description: |
            **${{ github.actor }}**ë‹˜ì´ ë‹¤ì´ë¸Œí–ˆìŠµë‹ˆë‹¤!
            
            ğŸ“ ${{ github.event.pull_request.title }}
          color: 0x3498db
          url: ${{ github.event.pull_request.html_url }}

      - name: PR Merged
        if: github.event.action == 'closed' && github.event.pull_request.merged
        uses: sarisia/actions-status-discord@v1
        with:
          webhook: ${{ secrets.DISCORD_WEBHOOK }}
          nodetail: true
          title: "âœ… ë°œí‘œìë£Œ ë¨¸ì§€ ì™„ë£Œ"
          description: |
            **${{ github.actor }}**ë‹˜ì˜ ë‹¤ì´ë¸Œê°€ ê¸°ë¡ë˜ì—ˆìŠµë‹ˆë‹¤!
            
            ğŸ“ ${{ github.event.pull_request.title }}
          color: 0x2ecc71
          url: ${{ github.event.pull_request.html_url }}

  notify-discussion:
    if: github.event_name == 'discussion'
    runs-on: ubuntu-latest
    steps:
      - name: New Discussion
        uses: sarisia/actions-status-discord@v1
        with:
          webhook: ${{ secrets.DISCORD_WEBHOOK }}
          nodetail: true
          title: "ğŸ’¬ ìƒˆ í† ë¡  ë“±ë¡"
          description: |
            **${{ github.actor }}**ë‹˜ì´ í† ë¡ ì„ ì‹œì‘í–ˆìŠµë‹ˆë‹¤!
            
            ğŸ“ ${{ github.event.discussion.title }}
          color: 0x9b59b6
          url: ${{ github.event.discussion.html_url }}